\documentclass{article}
\input{preamble}

\newcommand{\hwnumber}{5}

\begin{document}
\maketitle

\begin{ex}
Recall that $x\mathbin{R_\Sigma}y$ means that there are $w,v\in W$ such
that $|w|_\Sigma=x$ and $|v|_\Sigma=y$ and $w\mathbin{R} v$.
\begin{enumerate}
\item Let $x\in M$. Since
the map $w\mapsto |w|_\Sigma$ is surjective, we find $w\in W$ such that $|w|_\Sigma=x$.
Since $M$ is assumed to be reflexive, it follows that $w\mathbin{R} w$. We 
conclude that $x\mathbin{R_\Sigma} x$.

We have seen that the canonical model $\tilde{M}$ for \KT~is reflexive. Take a
non-theorem $\varphi$ of \KT~and let $\Sigma_\varphi$ be the subformula closed
set generated by $\varphi$. Then $\tilde{M}_\Sigma$ refutes $\varphi$ as a
corollary of the Filtration Theorem. Therefore we see that the finite 
reflexive frames refute all non-theorems of \KT.
\item Let $x,y\in W_\Sigma$ such that $x\mathbin{R_\Sigma}y$. Then there are
$w,v\in W$ such that $|w|_\Sigma=x$, $|v|_\Sigma=y$ and $w\mathbin{R} v$. It
follows that $v\mathbin{R} w$, so we conclude that $x\mathbin{R_\Sigma} y$.
\item Consider a model $M$ of which the transitive frame $w\to v\quad v'\to u$, where $w$ is the only $p$-world,
$v$ and $v'$ are the only $q$-worlds and $u$ is the only $r$-world, and consider
the subformula-closed set $\Sigma:=\{p,q,r\}$. Then it is immediate that
$|w|_\Sigma\mathbin{R_\Sigma}|v|_\Sigma$ and $|v'|_\Sigma\mathbin{R_\Sigma}|u|_\Sigma$,
and that $|v|_\Sigma=|v'|_\Sigma$. However, there is no edge from $w$ to $u$, so
there is no edge from $|w|_\Sigma$ to $|u|_\Sigma$ either. Therefore, we conclude
that $M_\Sigma$ is not transitive, even though $M$ is.
\item We first show that $(W_\Sigma,R^t,V^f)$ is a filtration of $M$. 
\begin{enumerate}
\item By definition.
\item Suppose that $w\mathbin{R} v$. To show that $|w|_\Sigma\mathbin{R^t}|v|_\Sigma$,
we have to show that for all $\varphi$, if $\pos\varphi\in\Sigma$ and
$v\models\varphi\lor\pos\varphi$, then $w\models\pos\varphi$. Let $\varphi$ be
a modal formula for which $\pos\varphi\in\Sigma$ and $v\models\varphi\lor\pos\varphi$.
We show that $w\models\pos\varphi$ by case distinction. 
Note that $v\models \varphi$ or $v\models\pos\varphi$.
In the first case, $v\models\varphi$ by assumption, so $w\models\pos\varphi$. 
In the second case, we find
a world $u$, which is $R$-accessible from $v$ and which is a $\varphi$-world.
Since $R$ is transitive and $w\mathbin{R} v$ and $v\mathbin{R} u$, we find that
$w\mathbin{R} u$. Hence $w\models\pos\varphi$.
\item Let $w,v\in W$ be such that $|w|_\Sigma\mathbin{R^t}|v|_\Sigma$, let
$\varphi$ be a modal formula such that $\pos\varphi\in\Sigma$ and such that
$v\models\varphi$. It follows that $v\models\varphi\lor\pos\varphi$, and hence
that $w\models\pos\varphi$. 
\item By definition.
\end{enumerate}
Next, we show that $R^t$ is transitive. Suppose that $w\mathbin{R^t}v$ and
$v\mathbin{R^t} u$. To show that $w\mathbin{R^t} u$, we must show that for every
$\varphi$ such that $\pos\varphi\in\Sigma$ and $u\models\varphi\lor\pos\varphi$,
we have $w\models\pos\varphi$. Let $\varphi$ be a modal formula such that
$\pos\varphi\in\Sigma$ and $u\models\varphi\lor\pos\varphi$. By the assumption
that $v\mathbin{R^t} u$, it follows that $v\models\pos\varphi$. Then it also
follows that $v\models\varphi\lor\pos\varphi$, so by the assumption that
$w\mathbin{R^t} v$ it follows that $w\models\pos\varphi$.

Any non-theorem of \textsf{S4} gets refuted by some world in some model. Let
$\varphi$ be a non-theorem of \textsf{S4} and let $M$ be a model with a world
refuting $\varphi$. Consider the subformula closed set $\Sigma$ generated by
$\varphi$. Then the finite model $(W_\Sigma,R^t,V^f)$ also refutes $\varphi$ as a consequence
of the Filtration theorem. Thus we conclude that any non-theorem of
\textsf{S4} is refuted by a finite transitive frame. 
\end{enumerate}
\end{ex}

\begin{ex}
\begin{enumerate}
\item Consider the model $M$ with underlying frame $w\to v$ where both 
worlds are $p$-worlds, and take $\Sigma:=\{p\}$. Then $M_\Sigma$ has as its
underlying frame the reflexive frame with one point, so it is not a tree.
\item Our goal is to exhibit a model $M$ and a subformula closed set $\Sigma$
such that there are two distinct worlds $w,v\in W$ with the property that
$f(|w|_\Sigma)=f(|v|_\Sigma)$. Consider the model of part (a), with
$\Sigma:=\{p,\pos p\}$. Then both $w$ and $v$ are $p$-worlds, but only
$w$ is a $\pos p$-world. Thus, $|w|_\Sigma\neq |v|_\Sigma$ while
$f(|w|_\Sigma)=f(|v|_\Sigma)$.
\end{enumerate}
\end{ex}

\begin{ex}
Recall that $\varphi\to\psi$ is valid if
and only if $\nu(\varphi)\subseteq\nu(\psi)$ for all valuations $\nu$. 
\begin{enumerate}
\item The statement $\nec(\varphi\land\psi)\leftrightarrow(\nec\varphi\land\nec\psi)$
is valid because
\begin{align*}
\nu(\nec(\varphi\land\psi))
  & =
\interior{\nu(\varphi\land\psi)}
  \\
  & =
\interior{\nu(\varphi)\cap\nu(\psi)}
  \\
  & =
\interior{\nu(\varphi)}\cap\interior{\nu(\psi)}
  \\
  & =
\nu(\nec\varphi)\cap\nu{\nec\psi}
  \\
  & =
\nu(\nec\varphi\land\nec\psi)
\end{align*}
for any valuation $\nu$.
\item Suppose that $\varphi\to\psi$ is valid. Then $\nu(\varphi)\subseteq\nu(\psi)$
for any valuation $\nu$. The interior operation is monotone, so it follows that
$\interior{\nu(\varphi)}\subseteq\interior{\nu(\psi)}$. Thus we conclude that
$\nu(\nec\varphi)\subseteq\nu(\nec\psi)$ for every valuation $\nu$, 
and hence that $\nec\varphi\to\nec\psi$ is valid.
\end{enumerate}
\end{ex}

\begin{ex}
\begin{enumerate}
\item Suppose $\varphi\to\nec\varphi$ is valid in a space $X$. Then, for every
$A\subseteq X$ we have $A\subseteq\interior{A}$. Thus, it follows that
$A=\interior{A}$ for every $A\subseteq X$. In other words, every subset of $X$
is open. We conclude that $X$ is discrete.

Now suppose that $X$ is discrete, let $\varphi$ be a modal formula and let
$\nu$ be a valuation. Then $\nu(\varphi)$ is open, so we have
\begin{equation*}
\nu(\varphi)=\interior{\nu(\varphi)}=\nu(\nec\varphi).
\end{equation*}
It follows that $\nu(\varphi\to\nec\varphi)=X$, i.e.~that $\varphi\to\nec\varphi$
is valid in $X$.
\item To figure out a candidate formula, let $p$ be an atomic proposition and let 
$X$ be a space. Then the function
$\{\nu(p)\mid\nu\text{ is a valuation}\}\to 2^X$ is surjective. Thus, we see that
every closed subset of $X$ can be obtained as a valuation of $\pos p$. Asserting
that the valuation of $\pos p$ should always be open can be done by asserting that
$\pos p\to \nec\pos p$. We will show that $\pos\varphi\to\nec\pos\varphi$ is
defines the class of spaces of which closed sets are open. By the previous reasoning,
we have already seen that if $\pos\varphi\to\nec\pos\varphi$ is valid in $X$, then
every closed set is open.

For the other direction, let $X$ be a space in which all closed sets are open, 
let $\varphi$ be a modal formula and let $\nu$ be a valuation. Then
$\nu(\pos\varphi)=\closure{\nu(\varphi)}$ is open by assumption, so
$\closure{\nu(\varphi)}\subseteq\interior{\closure{\nu(\varphi)}}
=\nu(\nec\pos\varphi)$. It follows that $\nu(\pos\varphi\to\nec\pos\varphi)=X$,
and hence that $\pos\varphi\to\nec\pos\varphi$ is valid in $X$. 
\end{enumerate}
\end{ex}

\begin{ex}
\begin{enumerate}
\item Define $U_x:=\bigcap\{U\in\tau\mid x\in U\}$. Then $U_x$ is the intersection
of open sets, hence it is open. It is contained in every open set which contains
$x$. To see that $x\in U_x$, note that $X\in\{U\in\tau\mid x\in U\}$.
\item Suppose that every point in $X$ has a minimal neighborhood $U_x$ and let
$V:I\to\tau$ for some set $I$. The goal is to show that $V:=\bigcap_{i\in I}V(i)$
is open. To do this, it suffices to show that $U_x\subseteq V$ for every
$x\in V$. Suppose $x\in V$. Then $x\in V(i)$ for each $i\in I$. Since $U_x$ is
minimal, we also have $U_x\subseteq V(i)$ for each $i\in I$. Thus we conclude
that $U_x\subseteq V$.
\end{enumerate}
\end{ex}
\end{document}
